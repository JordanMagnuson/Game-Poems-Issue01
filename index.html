<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Game Poems #1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --nav-height: 56px;

            --bg-page: #000b7a;
            --bg-panel: #f0eefc;
            --bg-button: #1e1b4b;

            --ink-main: #111322;
            --ink-muted: #323654;
            --ink-on-dark: #f7f7ff;

            --accent: #1e1b4b;
            --accent-soft: rgba(30,27,75,0.12);
            --border-soft: rgba(0,0,0,0.18);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
            Roboto, sans-serif;
            background: var(--bg-page);
            color: var(--ink-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ---------- Top navigation bar (centered title) ---------- */

        header.topbar {
            position: sticky;
            top: 0;
            z-index: 100;
            height: var(--nav-height);
            background: #050567;
            color: var(--ink-on-dark);
            display: grid;
            grid-template-columns: 1fr auto 1fr; /* left / center / right */
            align-items: center;
            padding: 0 1.5rem;
            font-size: 0.95rem;
            letter-spacing: 0.03em;
        }

        .nav-left {
            justify-self: start;
            white-space: nowrap;
        }

        .nav-center {
            justify-self: center;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            min-width: 0;
        }

        .nav-right {
            justify-self: end;
            white-space: nowrap;
            text-align: right;
        }

        .brand {
            font-weight: 600;
        }

        .nav-title {
            font-weight: 600;
            text-align: center;
            max-width: 260px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .page-indicator {
            font-weight: 500;
            opacity: 0.85;
        }

        .nav-arrow {
            border: none;
            background: none;
            padding: 0;
            margin: 0;
            color: var(--ink-on-dark);
            font: inherit;
            cursor: pointer;
            opacity: 0.85;
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
            white-space: nowrap;
            transition: opacity 0.15s ease, transform 0.12s ease;
        }

        .nav-arrow:hover:not(:disabled) {
            opacity: 1;
            transform: translateY(-1px);
        }

        .nav-arrow:disabled {
            opacity: 0.35;
            cursor: default;
            transform: none;
        }

        /* ---------- Views ---------- */

        main {
            flex: 1 1 auto;
        }

        .hidden {
            display: none !important;
        }

        /* Cover view: background image, centered blocks */

        #coverView {
            min-height: calc(100vh - var(--nav-height));
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 3rem 4vw; /* breathing room at sides */
            background-color: rgba(255, 255, 255, 0.6); /* Adjust background image lightness/opacity/transparency */
            background-blend-mode: lighten;
        }

        .cover-inner {
            margin: 0 auto;      /* centers block in viewport */
            width: 100%;
            max-width: 1920px;
        }

        /* ---------- GAME LAYOUT ---------- */

        .cover-grid {
            display: grid;
            grid-template-columns: minmax(0, 1fr);
            gap: 2rem;
        }

        @media (min-width: 880px) {
            .cover-grid {
                grid-template-columns: minmax(0, 50%) minmax(0, 50%);
            }
        }

        /* Left: cover image */

        .cover-image-frame {
            padding: 0;     /* Change padding if you want a frame around the cover image. */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cover-image-frame img {
            width: 100%;
            max-width: 5000px;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            display: block;
            margin-left: auto;
            margin-bottom: auto;
            box-shadow: 0 12px 28px rgba(5, 5, 39, 0.7);
        }

        /* Right: metadata column */

        .meta-column {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            padding: 1.25rem 1.75rem;
            /*background: rgba(255,255,255,0.5);*/
            /*box-shadow: 0 8px 22px rgba(5, 5, 39, 0.45);*/
        }

        .meta-header {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .meta-title {
            font-size: 2.1rem;
            line-height: 1.1;
            font-weight: 700;
            margin: 0;
            color: #151320;
        }

        .meta-artist {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--ink-muted);
        }

        .meta-location {
            font-size: 0.95rem;
            color: var(--ink-muted);
        }

        .play-button-row {
            margin-top: 0.4rem;
        }

        .btn-primary {
            background: var(--bg-button);
            color: var(--ink-on-dark);
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 3px;
            font-size: 0.95rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(5, 5, 39, 0.4);
            transition: transform 0.12s ease, box-shadow 0.12s ease,
            background 0.15s ease;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 24px rgba(5, 5, 39, 0.6);
            background: #161347;
        }

        .sections {
            display: block; /* Can change this to 'grid' if we want to show this info in multiple columns */
            grid-template-columns: minmax(0, 1fr);
            gap: 1rem 2rem;
        }

        @media (min-width: 720px) {
            .sections {
                grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.3fr);
            }
        }

        .section-block {
            font-size: 0.95rem;
        }

        .section-title {
            font-weight: 700;
            margin-bottom: 0.2rem;
            color: var(--ink-main);
        }

        .section-body {
            color: var(--ink-muted);
            line-height: 1.5;
        }

        .statement-block {
            grid-column: 1 / -1;
        }

        .statement-body {
            border-radius: 3px;
            background: var(--accent-soft);
            padding: 0.75rem 0.9rem;
            max-height: 9rem;
            overflow: auto;
            color: var(--ink-main);
        }

        /* ---------- TEXT LAYOUT ---------- */

        .text-layout {
            /* same outer width as game layout */
            max-width: 1400px;
            margin: 0 auto;
            color: var(--ink-main);
        }

        .text-title {
            margin: 0 0 1.5rem 0;
            font-size: 2.4rem;
            font-weight: 700;
        }

        .text-columns {
            column-count: 4;
            column-gap: 2rem;
            font-size: 0.98rem;
            line-height: 1.6;
        }

        @media (max-width: 1200px) {
            .text-columns {
                column-count: 3;
            }
        }

        @media (max-width: 900px) {
            .text-columns {
                column-count: 2;
            }
        }

        @media (max-width: 600px) {
            .text-columns {
                column-count: 1;
            }
        }

        /* ---------- Play view ---------- */

        #playView {
            height: calc(100vh - var(--nav-height));
            background: #050617;
        }

        #playView iframe {
            border: none;
            width: 100%;
            height: 100%;
            display: block;
            background: #000;
        }
    </style>
</head>
<body>

<header class="topbar">
    <div class="nav-left">
        <span class="brand">Game Poems #1</span>
    </div>
    <div class="nav-center">
        <button id="prevBtn" class="nav-arrow">
            ← Previous
        </button>
        <div id="navTitle" class="nav-title">Game Title</div>
        <button id="nextBtn" class="nav-arrow">
            Next →
        </button>
    </div>
    <div class="nav-right">
        <span id="pageIndicator" class="page-indicator">Page 1 of 1</span>
    </div>
</header>

<main>
    <!-- Cover / content view -->
    <section id="coverView">
        <div class="cover-inner">

            <!-- GAME PAGE LAYOUT -->
            <div id="gameLayout" class="cover-grid">
                <div class="cover-image-frame">
                    <img id="coverImage" src="" alt="Game cover">
                </div>
                <article class="meta-column">
                    <header class="meta-header">
                        <h1 id="metaTitle" class="meta-title">Game Title</h1>
                        <div id="metaArtist" class="meta-artist">Artist Name</div>
                        <div id="metaLocation" class="meta-location">Location</div>
                    </header>

                    <div class="play-button-row">
                        <button id="playButton" class="btn-primary">PLAY NOW</button>
                    </div>

                    <div class="sections">
                        <div class="section-block">
                            <div class="section-title">Estimated Play Time:</div>
                            <div id="metaPlayTime" class="section-body">
                                Less than 5 minutes
                            </div>
                        </div>

                        <div class="section-block">
                            <div class="section-title">Gameplay Instructions:</div>
                            <div id="metaInstructions" class="section-body">
                                Use the mouse to interact.
                            </div>
                        </div>

                        <div class="section-block">
                            <div class="section-title">It’s Over When:</div>
                            <div id="metaOverWhen" class="section-body">
                                You see ‘game over’.
                            </div>
                        </div>

                        <div class="section-block statement-block">
                            <div class="section-title">Artist Statement:</div>
                            <div id="metaStatement" class="section-body statement-body">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            </div>
                        </div>
                    </div>
                </article>
            </div>

            <!-- TEXT PAGE LAYOUT -->
            <div id="textLayout" class="text-layout hidden">
                <h1 id="textTitle" class="text-title">Page Title</h1>
                <div id="textContent" class="text-columns">
                    <!-- pageContent will be injected here -->
                </div>
            </div>

        </div>
    </section>

    <!-- Play view -->
    <section id="playView" class="hidden" aria-label="Game play area">
        <iframe id="gameFrame"
                src=""
                allow="autoplay; fullscreen; gamepad; xr-spatial-tracking; cross-origin-isolated">
        </iframe>
    </section>
</main>

<script>
    // --- Page data ---------------------------------------------------------
    const pages = [
        {
            typeOfPage: "text",
            title: "Forward",
            pageContent: `
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi rhoncus, ex id suscipit finibus, tortor libero commodo purus, quis tempor est mi non libero. Phasellus viverra ac nisi at interdum. Phasellus accumsan rhoncus felis. Mauris blandit commodo risus, lacinia sollicitudin ligula tincidunt id. Mauris rhoncus arcu in sapien pulvinar commodo. Quisque nec odio ac risus varius rutrum. Sed hendrerit auctor risus sit amet volutpat. Vivamus sed tortor nibh. Duis in iaculis velit. Proin sit amet auctor dui.</p>
                <p>Pellentesque eu ornare nulla, a bibendum neque. Mauris pretium dolor et augue mollis tincidunt. Proin sem risus, semper in tellus eget, tincidunt semper risus. Ut quis lorem vel felis pretium dictum non in massa. Nullam vel porta velit. Sed varius sapien diam, vitae tincidunt magna fermentum a. Ut pulvinar quam ac neque vulputate, ac posuere nibh tempor. Quisque aliquam velit eget laoreet sagittis.</p>
                <p>Vestibulum eu diam metus. In hac habitasse platea dictumst. Praesent consectetur metus nec augue vehicula, in accumsan ipsum aliquet. Aenean tristique consequat metus eget tincidunt. Curabitur ac egestas odio. Integer ut sollicitudin lectus. Etiam iaculis est libero, id bibendum ex rhoncus ac. Aliquam luctus enim at magna convallis vulputate. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nam egestas, ante scelerisque volutpat luctus, augue dui ornare nunc, in lacinia quam justo eu libero. Pellentesque varius augue eget magna elementum rhoncus. Aenean aliquam lobortis augue, a tempus lacus lobortis eu. In et pulvinar risus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sodales metus nec orci auctor tincidunt.</p>
                <p>Vestibulum tincidunt ex mi, feugiat suscipit risus molestie pretium. Cras dignissim massa vitae augue dictum luctus. Cras dignissim sem a lobortis fermentum. Proin ipsum urna, sodales venenatis pretium et, convallis nec nunc. Ut quis eros ut metus dignissim hendrerit porta ut purus. Donec sodales nisl in sapien tempus rhoncus. Sed at mi sed arcu posuere dapibus vel in eros. Donec placerat mauris sed urna dictum hendrerit. Proin ac lacinia magna. Etiam elit urna, ultricies pretium tempor eget, tincidunt eget tortor. Fusce ullamcorper aliquam augue sed dictum.</p>
                <p>Integer rutrum iaculis est ac ultricies. Integer a vestibulum purus. Phasellus bibendum tempus purus. Morbi malesuada sodales velit sed ultrices. Phasellus efficitur massa in massa posuere, id aliquam magna gravida. Ut dolor ipsum, laoreet sed tortor at, hendrerit fringilla leo. Aliquam ornare efficitur massa ut congue. Cras bibendum est volutpat nibh interdum sollicitudin eget non lorem. Curabitur tortor magna, faucibus semper est nec, mollis ultricies leo. Sed rutrum, lectus eu semper finibus, est justo consectetur eros, a lobortis mi ex sit amet elit. In hac habitasse platea dictumst. Nulla porttitor eu enim et cursus. Nullam nulla neque, accumsan nec dui vel, maximus auctor tortor. Cras faucibus consequat turpis, at dapibus risus iaculis in. Maecenas eros tellus, placerat id tristique tristique, tempor et ex.</p>
                <p>Jordan Magnuson<br/>Founding Editor, <em>Game Poems</em></p>
            `
        },
        {
            typeOfPage: "game",
            title: "Gambit",
            slug: "gambit",
            src: "games/gambit/index.html",
            author: "Caitlin DeRosa",
            location: "West Islip, USA",
            estimatedPlayTime: "Less than 10 minutes",
            instructions: "Use your mouse and keyboard as indicated.",
            overWhen: "You reach the final journal entry.",
            statement: "The majority of Gambit's planning and development took place in the online note-taking app Obsidian..."
        },
        {
            typeOfPage: "game",
            title: "Hesitation",
            slug: "hesitation",
            src: "games/hesitation/index.html",
            author: "Yifan Yuan",
            location: "Hangzhou, China",
            estimatedPlayTime: "Less than 5 minutes",
            instructions: "Use the mouse to explore and click where you feel drawn.",
            overWhen: "You see the word 'Hesitation' fade away.",
            statement: "Artist statement for Hesitation goes here."
        },
        {
            typeOfPage: "game",
            title: "Firsts",
            slug: "firsts",
            src: "games/firsts/index.html",
            author: "Geoffrey Mugford",
            location: "London, UK",
            estimatedPlayTime: "Around 5–10 minutes",
            instructions: "Follow on-screen prompts with mouse and keyboard.",
            overWhen: "You’ve experienced all the first memories presented.",
            statement: "Artist statement for Firsts goes here."
        }
    ];

    // --- DOM references ----------------------------------------------------

    const coverViewEl = document.getElementById("coverView");
    const playViewEl = document.getElementById("playView");

    const gameLayoutEl = document.getElementById("gameLayout");
    const textLayoutEl = document.getElementById("textLayout");

    const coverImgEl = document.getElementById("coverImage");

    const metaTitleEl = document.getElementById("metaTitle");
    const metaArtistEl = document.getElementById("metaArtist");
    const metaLocationEl = document.getElementById("metaLocation");
    const metaPlayTimeEl = document.getElementById("metaPlayTime");
    const metaInstructionsEl = document.getElementById("metaInstructions");
    const metaOverWhenEl = document.getElementById("metaOverWhen");
    const metaStatementEl = document.getElementById("metaStatement");

    const textTitleEl = document.getElementById("textTitle");
    const textContentEl = document.getElementById("textContent");

    const playButtonEl = document.getElementById("playButton");
    const gameFrameEl = document.getElementById("gameFrame");

    const prevBtnEl = document.getElementById("prevBtn");
    const nextBtnEl = document.getElementById("nextBtn");
    const navTitleEl = document.getElementById("navTitle");
    const pageIndicatorEl = document.getElementById("pageIndicator");

    // --- State -------------------------------------------------------------

    let currentIndex = 0;

    // --- Helper to build ids from titles ----------------------------------

    function makeIdFromTitle(title) {
        if (!title) return "";
        return String(title)
            .trim()
            .replace(/\s+/g, "")          // remove spaces
            .replace(/[^A-Za-z0-9_-]/g, ""); // strip other unsafe chars
    }

    // --- Helpers for asset paths ------------------------------------------

    function getCoverSrc(page) {
        if (page.cover) return page.cover;
        if (page.slug) return `games/${page.slug}/cover.png`;
        if (page.src && page.src.endsWith("index.html")) {
            return page.src.replace("index.html", "cover.png");
        }
        return "";
    }

    function getBackgroundSrc(page) {
        if (page.background) return page.background;
        if (page.slug) return `games/${page.slug}/background.png`;
        if (page.src && page.src.endsWith("index.html")) {
            return page.src.replace("index.html", "background.png");
        }
        return "";
    }

    // --- Rendering functions ----------------------------------------------

    function updateNav() {
        const page = pages[currentIndex];
        navTitleEl.textContent = page.title || "Page";
        pageIndicatorEl.textContent = `Page ${currentIndex + 1} of ${pages.length}`;
        prevBtnEl.disabled = currentIndex === 0;
        nextBtnEl.disabled = currentIndex === pages.length - 1;
    }

    function showCover(index) {
        if (typeof index === "number") {
            currentIndex = Math.max(0, Math.min(index, pages.length - 1));
        }

        const page = pages[currentIndex];

        // Background image (for both page types)
        const bgSrc = getBackgroundSrc(page);
        coverViewEl.style.backgroundImage = bgSrc ? `url("${bgSrc}")` : "none";

        // Decide layout by typeOfPage
        if (page.typeOfPage === "text") {
            // Hide game layout, show text layout
            gameLayoutEl.classList.add("hidden");
            textLayoutEl.classList.remove("hidden");

            // Give this text page a unique id based on its title
            const baseId = "textLayout";
            const suffix = makeIdFromTitle(page.title || "");
            textLayoutEl.id = suffix ? baseId + suffix : baseId;

            // Title + content
            textTitleEl.textContent = page.title || "";
            textContentEl.innerHTML = page.pageContent || "";

        } else {
            // Default to game layout
            textLayoutEl.classList.add("hidden");
            textLayoutEl.id = "textLayout"; // reset base id when not on a text page
            gameLayoutEl.classList.remove("hidden");

            const coverSrc = getCoverSrc(page);
            coverImgEl.src = coverSrc || "";
            coverImgEl.alt = page.title ? `${page.title} cover art` : "Game cover";

            // Metadata
            metaTitleEl.textContent = page.title || "";
            metaArtistEl.textContent = page.author || "";
            metaLocationEl.textContent = page.location || "";
            metaPlayTimeEl.textContent = page.estimatedPlayTime || "—";
            metaInstructionsEl.textContent = page.instructions || "—";
            metaOverWhenEl.textContent = page.overWhen || "—";
            metaStatementEl.textContent = page.statement || "—";
        }

        // Switch views: always show cover/content view
        coverViewEl.classList.remove("hidden");
        playViewEl.classList.add("hidden");

        // Stop any running game
        gameFrameEl.src = "about:blank";

        updateNav();
        window.scrollTo({ top: 0, behavior: "instant" });
    }

    function showPlay() {
        const page = pages[currentIndex];

        // Only makes sense for game pages; text pages won't show the button
        if (page.typeOfPage !== "game") return;

        gameFrameEl.src = page.src || "";
        coverViewEl.classList.add("hidden");
        playViewEl.classList.remove("hidden");
        updateNav();
    }

    // --- Event wiring ------------------------------------------------------

    playButtonEl.addEventListener("click", showPlay);
    prevBtnEl.addEventListener("click", () => showCover(currentIndex - 1));
    nextBtnEl.addEventListener("click", () => showCover(currentIndex + 1));

    // --- Init --------------------------------------------------------------

    if (pages.length > 0) {
        showCover(0);
    }
</script>
</body>
</html>
